"use strict";var e=require("zod"),r=require("@privy-io/api-base"),t=require("../constants/oauth.js"),o=require("./account-transfer.js"),i=require("./core.js"),s=require("./oauth-custom.js"),a=require("./user.js");require("bs58"),require("libphonenumber-js/max"),require("viem"),require("./smart-wallet-config.js"),require("../constants/smart-wallets.js"),require("./wallet-api/wallets/index.js"),require("./api.js"),require("./transaction.js"),require("./wallet-api/export.js"),require("./wallet-api/wallets/spark/index.js"),require("./wallet-api/wallets/spark/utils.js");const n=e.z.enum(t.SUPPORTED_OAUTH_PROVIDERS,{invalid_type_error:"Please specify a supported provider.",required_error:"Please specify a supported provider."}),p=n.or(e.z.custom((e=>"string"==typeof e&&/^privy:[a-z0-9]{25}$/i.test(e)),{message:"Please specify a supported provider."})).or(s.CustomOAuthProviderID),u=e.z.object({authorization_code:e.z.string(),state_code:e.z.string(),code_verifier:e.z.string().min(43).max(128).optional(),code_type:e.z.enum(["raw"]).optional()}).merge(i.AuthenticateMode).catch((()=>{throw new r.UnauthorizedError("Please specify authorization_code and state_code.",r.PrivyErrorCode.INVALID_CREDENTIALS)})),l=e.z.object({redirect_to:e.z.string({required_error:"Please provide a redirect_to value."}),provider:p,token:e.z.string().optional(),state_code:e.z.string().optional(),code_challenge:e.z.string().optional()}),d=e.z.object({authorization_code:e.z.string(),state_code:e.z.string(),code_verifier:e.z.string().min(43).max(128).optional(),code_type:e.z.enum(["raw"]).optional()}),c=e.z.object({subject:e.z.string(),provider:p}),z=e.z.object({url:e.z.string()}),g=a.User.extend({oauth_tokens:a.OAuthTokens.optional()}),_=o.BaseAccountTransferInput.extend({userInfo:e.z.object({subject:e.z.string(),name:e.z.string().optional(),username:e.z.string().optional(),profilePictureUrl:e.z.string().optional(),email:e.z.string().optional().nullable(),vanityName:e.z.string().optional(),meta:e.z.object({providerAppId:e.z.string().optional()}).optional(),embeddedWalletAddresses:e.z.array(e.z.string()).optional(),smartWalletAddresses:e.z.array(e.z.string()).optional()})});exports.SUPPORTED_OAUTH_PROVIDERS=t.SUPPORTED_OAUTH_PROVIDERS,exports.AuthenticateOauthInput=u,exports.ExternalOAuthProvider=n,exports.LinkOAuthInput=d,exports.OAuthInitInput=l,exports.OAuthInitResponse=z,exports.OAuthLinkResponse=g,exports.OAuthProvider=p,exports.OAuthUnlinkInput=c,exports.TransferOAuthInput=_;
