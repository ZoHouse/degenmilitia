"use strict";var e=require("zod"),t=require("../api.js"),r=require("../policy.js"),s=require("./key-quorums.js"),i=require("./wallets/index.js");require("@privy-io/api-base"),require("../core.js"),require("bs58"),require("libphonenumber-js/max"),require("viem"),require("../transaction.js"),require("./export.js"),require("./wallets/spark/index.js"),require("./wallets/spark/utils.js");const n=e.z.enum(["KEY_QUORUM","POLICY","RPC","WALLET"]),o=e.z.enum(["pending","executed","failed","expired","rejected"]);let a=/[0-9a-z]{24,32}/;const p=(e,t)=>RegExp(`(?:https://(?:[^/]+\\.privy\\.io|privy\\.io)(?:/api)?|http://localhost(?::\\d+)?(?:/api)?)/v1/${e}/${a.source}${t?`/${t}`:""}$`),l=e.z.object({method:e.z.literal("POST"),url:e.z.string().regex(p("wallets","rpc"),"URL must be http(s)://localhost or *.privy.io/api/v1/wallets/[wallet_id]/rpc"),body:i.WalletApiRpcInput}).strict(),u=e.z.object({method:e.z.literal("PATCH"),url:e.z.string().regex(p("wallets"),"URL must be http(s)://localhost or *.privy.io/api/v1/wallets/[wallet_id]"),body:i.WalletUpdateInput}).strict(),c=e.z.object({method:e.z.literal("PATCH"),url:e.z.string().regex(p("key_quorums"),"URL must be http(s)://localhost or *.privy.io/api/v1/key_quorums/[key_quorum_id]"),body:s.UpdateKeyQuorumInput}).strict(),d=e.z.object({method:e.z.literal("PATCH"),url:e.z.string().regex(p("policies"),"URL must be http(s)://localhost or *.privy.io/api/v1/policies/[policy_id]"),body:r.UpdatePolicyInput}).strict(),_=e.z.union([l,u,c,d]),z=e.z.discriminatedUnion("type",[e.z.object({type:e.z.literal("user"),user_id:e.z.string(),display_name:e.z.string().optional(),has_signed:e.z.boolean()}).strict(),e.z.object({type:e.z.literal("key"),public_key:e.z.string(),display_name:e.z.string().optional(),has_signed:e.z.boolean()}).strict()]),y=e.z.object({members:e.z.array(z),threshold:e.z.number(),display_name:e.z.string().optional()}).strict();let b=e.z.object({intent_id:e.z.string(),created_by_display_name:e.z.string(),created_by_id:e.z.string().optional(),created_at:e.z.number(),resource_id:e.z.string(),authorization_details:e.z.array(y),status:o,expires_at:e.z.number()}).strict(),m=e.z.object({status_code:e.z.number(),executed_at:e.z.number(),authorized_by_display_name:e.z.string().optional(),authorized_by_id:e.z.string().optional()}).strict();const x=b.extend({intent_type:e.z.literal("KEY_QUORUM"),request_details:c,current_resource_data:s.KeyQuorumResponse.optional(),action_result:m.extend({response_body:s.KeyQuorumResponse,prior_state:s.KeyQuorumResponse}).strict().optional()}).strict(),g=b.extend({intent_type:e.z.literal("POLICY"),request_details:d,current_resource_data:r.PolicyResponse.optional(),action_result:m.extend({response_body:r.PolicyResponse,prior_state:r.PolicyResponse}).strict().optional()}).strict(),R=b.extend({intent_type:e.z.literal("RPC"),request_details:l,current_resource_data:i.WalletResponse.optional(),action_result:m.extend({response_body:i.WalletApiRpcResponse}).strict().optional()}).strict(),I=b.extend({intent_type:e.z.literal("WALLET"),request_details:u,current_resource_data:i.WalletResponse.optional(),action_result:m.extend({response_body:i.WalletResponse,prior_state:i.WalletResponse}).strict().optional()}).strict(),h=e.z.discriminatedUnion("intent_type",[x,g,R,I]),q=e.z.object({intent_id:e.z.string({required_error:"Intent ID must be provided",invalid_type_error:"Intent ID is not a valid string"}).min(1)}),j=t.Pagination.extend({status:o.optional(),intent_type:n.optional(),created_by_id:e.z.string().optional(),pending_member_id:e.z.string().optional(),resource_id:e.z.string().optional()}),v=e.z.object({data:e.z.array(h),next_cursor:e.z.string().nullable()}).strict(),P=e.z.object({signature:e.z.string(),timestamp:e.z.number()}).strict(),U=e.z.object({signature:e.z.string()}).strict();exports.IntentAuthorization=y,exports.IntentAuthorizationInput=P,exports.IntentAuthorizationMember=z,exports.IntentAuthorizeInput=U,exports.IntentIdFromPath=q,exports.IntentListInput=j,exports.IntentListResponse=v,exports.IntentRequestDetails=_,exports.IntentResponse=h,exports.IntentStatus=o,exports.IntentType=n,exports.KeyQuorumIntentRequestDetails=c,exports.KeyQuorumIntentResponse=x,exports.PolicyIntentRequestDetails=d,exports.PolicyIntentResponse=g,exports.RpcIntentRequestDetails=l,exports.RpcIntentResponse=R,exports.WalletIntentRequestDetails=u,exports.WalletIntentResponse=I,exports.createIntentUrlPattern=p;
