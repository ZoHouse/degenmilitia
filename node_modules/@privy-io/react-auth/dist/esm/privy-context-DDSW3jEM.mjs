import{getAddress as e}from"viem";import{createContext as t,useContext as i}from"react";import{n as a}from"./internal-context-CfE_S5P-.mjs";function r(e){return"string"==typeof e&&/^custom:[a-zA-Z0-9_-]+$/i.test(e)}function s(e){return e?new Date(1e3*e):null}function l(e,t){return e.slice().sort(((e,t)=>(e.firstVerifiedAt?.getTime()??0)-(t.firstVerifiedAt?.getTime()??0))).find((e=>e.type===t))}const n=e=>e?d(e).find((e=>0===e.walletIndex))??null:null,d=e=>e?u(e,"ethereum"):[],u=(e,t)=>e.linkedAccounts.filter((e=>"wallet"===e.type&&"privy"===e.walletClientType&&!e.imported&&e.chainType===t)),p=e=>e?u(e,"solana"):[],m=e=>e?p(e).find((e=>0===e.walletIndex))??null:null,c=e=>(e?.linkedAccounts??[]).filter((e=>"wallet"===e.type&&"privy"===e.walletClientType&&e.imported&&"ethereum"===e.chainType)),o=e=>(e?.linkedAccounts??[]).filter((e=>"wallet"===e.type&&e.imported&&"privy"===e.walletClientType&&"solana"===e.chainType));let f=(t,i)=>t===i||!(!t.startsWith("0x")||!i.startsWith("0x"))&&e(t)===e(i);const _=(e,t)=>e?.linkedAccounts.find((e=>"wallet"===e.type&&"privy"===e.walletClientType&&f(e.address,t)))||null,y=(e,t)=>e.find((e=>f(e.address,t)))||null,h=e=>n(e)??m(e);function b(e){if(!e)return null;let t=function(e){let t=[];for(let i of e){let e=i.type;switch(i.type){case"wallet":let a={id:i.id,address:i.address,type:i.type,imported:i.imported,delegated:i.delegated,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at),chainType:i.chain_type,walletClientType:i.wallet_client_type,connectorType:i.connector_type,recoveryMethod:i.recovery_method,walletIndex:i.wallet_index,publicKey:i.public_key};t.push(a);break;case"smart_wallet":let l={address:i.address,type:i.type,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at),smartWalletType:i.smart_wallet_type,smartWalletVersion:i.smart_wallet_version};t.push(l);break;case"cross_app":let n={type:i.type,subject:i.subject,embeddedWallets:i.embedded_wallets,smartWallets:i.smart_wallets,providerApp:{id:i.provider_app_id},firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(n);break;case"email":let d={address:i.address,type:i.type,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(d);break;case"phone":let u={number:i.phoneNumber,type:i.type,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(u);break;case"google_oauth":let p={subject:i.subject,email:i.email,name:i.name,type:i.type,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(p);break;case"spotify_oauth":let m={subject:i.subject,email:i.email,name:i.name,type:i.type,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(m);break;case"instagram_oauth":let c={subject:i.subject,username:i.username,type:i.type,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(c);break;case"twitter_oauth":let o={subject:i.subject,username:i.username,name:i.name,type:i.type,profilePictureUrl:i.profile_picture_url,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(o);break;case"discord_oauth":let f={subject:i.subject,username:i.username,email:i.email,type:i.type,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(f);break;case"github_oauth":let _={subject:i.subject,username:i.username,name:i.name,email:i.email,type:i.type,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(_);break;case"tiktok_oauth":let y={subject:i.subject,username:i.username,name:i.name,type:i.type,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(y);break;case"line_oauth":let h={subject:i.subject,name:i.name,email:i.email,profilePictureUrl:i.profile_picture_url,type:i.type,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(h);break;case"twitch_oauth":let b={subject:i.subject,username:i.username,type:i.type,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(b);break;case"linkedin_oauth":let k={subject:i.subject,name:i.name,email:i.email,vanityName:i.vanity_name,type:i.type,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(k);break;case"apple_oauth":let A={subject:i.subject,email:i.email,type:i.type,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(A);break;case"custom_auth":t.push({type:i.type,customUserId:i.custom_user_id,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)});break;case"farcaster":let v={type:i.type,fid:i.fid,ownerAddress:i.owner_address,displayName:i.display_name,username:i.username,bio:i.bio,pfp:i.profile_picture_url,url:i.homepage_url,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at),signerPublicKey:i.signer_public_key};t.push(v);break;case"passkey":let g={type:i.type,enrolledInMfa:i.enrolled_in_mfa,credentialId:i.credential_id,publicKey:i.public_key,authenticatorName:i.authenticator_name,createdWithDevice:i.created_with_device,createdWithOs:i.created_with_os,createdWithBrowser:i.created_with_browser,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(g);break;case"telegram":let w={type:i.type,telegramUserId:i.telegram_user_id,firstName:i.first_name,lastName:i.last_name,username:i.username,photoUrl:i.photo_url,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(w);break;default:if(r(i.type)){let e={type:i.type,subject:i.subject,name:i.name,username:i.username,email:i.email,profilePictureUrl:i.profile_picture_url,firstVerifiedAt:s(i.first_verified_at),latestVerifiedAt:s(i.latest_verified_at)};t.push(e);break}console.warn(`Unrecognized account type: ${e}. Please consider upgrading the Privy SDK.`)}}return t}(e.linked_accounts),i=l(t,"wallet"),a=l(t,"smart_wallet"),n=l(t,"email"),d=l(t,"phone"),u=l(t,"google_oauth"),p=l(t,"twitter_oauth"),m=l(t,"discord_oauth"),c=l(t,"github_oauth"),o=l(t,"spotify_oauth"),f=l(t,"instagram_oauth"),_=l(t,"tiktok_oauth"),y=l(t,"line_oauth"),h=l(t,"twitch_oauth"),b=l(t,"linkedin_oauth"),k=l(t,"apple_oauth"),A=l(t,"farcaster"),v=l(t,"telegram"),g=e.mfa_methods.map((({type:e,verified_at:t})=>({type:e,verifiedAt:s(t)})));return{id:e.id,createdAt:s(e.created_at),linkedAccounts:t,email:n&&{address:n?.address},phone:d&&{number:d?.number},wallet:i&&{id:i.id,address:i.address,chainType:i.chainType,walletClientType:i.walletClientType,connectorType:i.connectorType,recoveryMethod:i.recoveryMethod,imported:i.imported,delegated:i.delegated,walletIndex:i.walletIndex,publicKey:i.publicKey},smartWallet:a&&{address:a.address,smartWalletType:a.smartWalletType,smartWalletVersion:a.smartWalletVersion},google:u&&{subject:u.subject,email:u.email,name:u.name},twitter:p&&{subject:p.subject,username:p.username,name:p.name,profilePictureUrl:p.profilePictureUrl},discord:m&&{subject:m.subject,username:m.username,email:m.email},github:c&&{subject:c.subject,username:c.username,name:c.name,email:c.email},spotify:o&&{subject:o.subject,email:o.email,name:o.name},instagram:f&&{subject:f.subject,username:f.username},tiktok:_&&{subject:_.subject,username:_.username,name:_.name},line:y&&{subject:y.subject,name:y.name,email:y.email,profilePictureUrl:y.profilePictureUrl},twitch:h&&{subject:h.subject,username:h.username},linkedin:b&&{subject:b.subject,name:b.name,email:b.email,vanityName:b.vanityName},apple:k&&{subject:k.subject,email:k.email},farcaster:A&&{fid:A.fid,ownerAddress:A.ownerAddress,displayName:A.displayName,username:A.username,bio:A.bio,pfp:A.pfp,url:A.url,signerPublicKey:A.signerPublicKey},telegram:v&&{telegramUserId:v.telegramUserId,firstName:v.firstName,lastName:v.lastName,username:v.username,photoUrl:v.photoUrl},delegatedWallets:[],mfaMethods:g.map((e=>e.type)),hasAcceptedTerms:e.has_accepted_terms??!1,isGuest:e.is_guest,customMetadata:e.custom_metadata}}const k=e=>!!e.id&&"privy-v2"===e.recoveryMethod,A=/*#__PURE__*/t({ready:!1,authenticated:!1,user:null,walletConnectors:null,connectWallet:a,login:a,connectOrCreateWallet:a,linkEmail:a,linkPhone:a,linkFarcaster:a,linkWallet:a,startCrossAppAuthFlow:a,linkGoogle:a,linkTwitter:a,linkTwitch:a,linkDiscord:a,linkGithub:a,linkSpotify:a,linkInstagram:a,linkTelegram:a,linkTiktok:a,linkLine:a,linkLinkedIn:a,linkApple:a,linkPasskey:a,updateEmail:a,updatePhone:a,logout:a,getAccessToken:a,unlinkEmail:a,unlinkPhone:a,unlinkWallet:a,unlinkGoogle:a,unlinkTwitter:a,unlinkTwitch:a,unlinkDiscord:a,unlinkGithub:a,unlinkSpotify:a,unlinkInstagram:a,unlinkTiktok:a,unlinkLine:a,unlinkLinkedIn:a,unlinkApple:a,unlinkCrossAppAccount:a,unlinkFarcaster:a,unlinkTelegram:a,unlinkPasskey:a,signMessage:a,signTypedData:a,enrollInMfa:a,initEnrollmentWithSms:a,initEnrollmentWithTotp:a,initEnrollmentWithPasskey:a,promptMfa:a,init:a,submitEnrollmentWithSms:a,submitEnrollmentWithTotp:a,submitEnrollmentWithPasskey:a,unenroll:a,submit:a,cancel:a,sendTransaction:a,signTransaction:a,exportWallet:a,setWalletPassword:a,setWalletRecovery:a,requestFarcasterSignerFromWarpcast:a,getFarcasterSignerPublicKey:a,signFarcasterMessage:a,signMessageWithCrossAppWallet:a,signTypedDataWithCrossAppWallet:a,sendTransactionWithCrossAppWallet:a,signTransactionWithCrossAppWallet:a,isModalOpen:!1,mfaMethods:[]}),v=()=>i(A);export{A as P,h as a,n as b,b as c,d,c as e,_ as f,k as g,o as h,r as i,y as j,p as k,m as l,u as m,v as u};
